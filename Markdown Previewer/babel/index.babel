//https://fcctop100.herokuapp.com/api/fccusers/top/recent
//https://fcctop100.herokuapp.com/api/fccusers/top/alltime

var LeaderBoard = React.createClass({
  getInitialState: function() {
    return {
      camper: [],
      type: "recent"
    };
  },
  recent: function() {
    var self = this;
    $.get(
      "https://fcctop100.herokuapp.com/api/fccusers/top/recent",
      function(data) {
        self.setState({
          camper: data,
          type: "recent"
        });
      }.bind(this)
    );
  },
  allTime: function() {
    var self = this;
    $.get(
      "https://fcctop100.herokuapp.com/api/fccusers/top/alltime",
      function(data) {
        self.setState({
          camper: data,
          type: "alltime"
        });
      }.bind(this)
    );
  },
  componentDidMount: function() {
    this.recent();
  },
  handleRecentClick: function(e) {
    this.recent();
  },
  handleAlltimeClick: function(e) {
    this.allTime();
  },
  render: function() {
    return (
      <div className="container-fluid">
        <div className="row">
          <div className="col-sm-1" />
          <div className="col-sm-10">
            <table align="center">
              <tr>
                <th>#</th>
                <th>Icon</th>
                <th>FreeCodeCamper</th>
                <th onClick={this.recent}>30 Days</th>
                <th onClick={this.allTime}>All Time</th>
              </tr>
              {this.state.camper.map(function(user, index) {
                return (
                  <tr>
                    <td>{index + 1}</td>
                    <td><img src={user.img} /></td>
                    <td><a href={"https://freecodecamp.com/"+user.username} target="_blank">{user.username}</a></td>
                    <td>{user.recent}</td>
                    <td>{user.alltime}</td>
                  </tr>
                );
              })}
            </table>
          </div>
          <div className="col-sm-1" />
        </div>
      </div>          
    );
  }
});


ReactDOM.render(<LeaderBoard />, document.getElementById("app"));
